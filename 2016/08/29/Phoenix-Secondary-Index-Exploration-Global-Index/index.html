<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#33363b">
    <meta name="msapplication-TileColor" content="#33363b">
    
    
    
    <meta name="keywords" content="Life, ARIA, Hexo">
    
    
    <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
    
    
    <link rel="icon" type="image/png" sizes="192x192" href="/favicons/android-chrome-192x192.png">
    
    
    <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
    
    
    <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
    
    
    <link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#33363b">
    
    
    <link rel="manifest" href="/favicons/site.webmanifest">
    
    
    <meta name="msapplication-config" content="/favicons/browserconfig.xml">
    
    
    <link rel="alternate" href="/atom.xml" title="dequn's blog" type="application/atom+xml" />
    
    
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    
    
    <link rel="stylesheet" type="text/css" href="/css/normalize.css">
    <link rel="stylesheet" type="text/css" href="/css/index.css">
    
    <link rel="stylesheet" type="text/css" href="/css/sidebar.css">
    
    
<link rel="stylesheet" type="text/css" href="/css/page.css">
<link rel="stylesheet" type="text/css" href="/css/post.css">

    <link rel="stylesheet" type="text/css" href="/css/custom.css">
    <link rel="stylesheet" type="text/css" href="/css/atom-one-dark.css">
    <link rel="stylesheet" type="text/css" href="/css/lightgallery.min.css">
    <script type="text/javascript" src="/js/jquery.min.js"></script>
    <script defer type="text/javascript" src="/js/util.js"></script>
    <script defer type="text/javascript" src="/js/scrollspy.js"></script>
    <script defer type="text/javascript" src="/js/fontawesome-all.min.js"></script>
    <script defer type="text/javascript" src="/js/lightgallery.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-fullscreen.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-hash.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-pager.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-thumbnail.min.js"></script>
    <script defer type="text/javascript" src="/js/lg-zoom.min.js"></script>
    
    <script defer src="/js/busuanzi.pure.mini.js"></script>
    
    
    
    <script defer type="text/javascript" src="/js/index.js"></script>
    
    <script defer type="text/javascript" src="/js/custom.js"></script>
    <title>Phoenix Secondary Index初探之Global Index | dequn's blog - 这些文章没啥用</title>
  </head>
  <body itemscope itemtype="http://schema.org/WebPage" lang="en"  data-spy="scroll" data-target=".list-group">
    
<header id="header" class="header" style="background: #33363b;">
  <div class="container">
    <div class="header-container">
      <div class="header-title">
        <h1 class="title"><a href="/">dequn's blog</a></h1>
        <h2 class="subtitle">这些文章没啥用</h2>
      </div>
      <div class="logo">
        <img src="/images/ARIA_logo.png" alt="logo">
      </div>
    </div>
    
<nav id="nav" class="nav">
  <a id="nav-toggle" class="nav-toggle"><i class="fas fa-bars"></i></a>
  <ul id="menu">
    
    <li><a href="/">Home</a></li>
    
    <li><a href="/archives/">Archives</a></li>
    
    <li><a href="/categories/">Categories</a></li>
    
    <li><a href="/tags/">Tags</a></li>
    
    <li><a href="/about/">About</a></li>
    
  </ul>
</nav>


  </div>
</header>


    <main id="main" class="main">
      <div class="container">
        <div class="main-container">
          <div class="content">
            
<section id="post" class="post">
  
  <article class="post-container card" itemscope itemtype="http://schema.org/Article">
    <div class="post-block">
      <link itemprop="mainEntityOfPage" href="http://dequn.github.io/2016/08/29/Phoenix-Secondary-Index-Exploration-Global-Index/">
      <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
       <meta itemprop="name" content="dequn">
       <meta itemprop="description" content="这些文章没啥用">
       <meta itemprop="image" content="https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcTL1rxWN2-S8kC34oi2QhbeQdm1hRAhzQTEpm5AFhnG3tJ-ccTI">
      </span>
      <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
       <meta itemprop="name" content="dequn's blog">
      </span>
    </div>
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
       <span class="">Phoenix Secondary Index初探之Global Index</span>
      </h1>
      <div class="post-meta">
        
        <span class="post-date">
          <i class="far fa-calendar-plus"></i><span><time title="post-date" itemprop="dateCreated datePublished" datetime="2016-08-29T21:44:48+08:00">2016-08-29 21:44:48</time></span>
        </span>
        
        
        
        <span class="post-meta-divider divider">|</span>
        
        <span class="post-categories">
          
          <i class="far fa-folder-open"></i><span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Phoenix/" itemprop="url" rel="index"><span itemprop="name">Phoenix</span></a></span>
        </span>
        
        
      </div>
    </header>
    <main class="post-body" itemprop="articleBody">
      <p>上篇我们提到了HBase建立二级索引的原理，但是当我们自己建立二级索引，就需要做额外很多工作，我们需要定义Coprocessor，在数据更新的时候更新索引，查询时先去检索索引表等，定义这些Coprocessor不仅费时费力，而且一般使用者不能保证程序的高效性、健壮性等。还好，已经有不少构建在HBase上的插件——个人觉得称之为插件更为合理，已经帮我们做了这些工作，Phoenix就是其中一种。</p>
<p>Phoenix提供的二级索引按索引对象可以分为Covered Indexes 和 Functional Indexes，Covered Indexed就是对原始数据进行所以，Functional Indexes就是就原始数据进行处理后再索引，区别从<a href="https://phoenix.apache.org/secondary_indexing.html" target="_blank" rel="noopener">官方给出的两个例子</a>就可以很明显的看出，不再讨论。</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># Covered Indexes</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> my_index <span class="keyword">ON</span> my_table (v1,v2) <span class="keyword">INCLUDE</span>(v3)</span><br><span class="line"></span><br><span class="line"># Functional Indexes</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> UPPER_NAME_IDX <span class="keyword">ON</span> EMP (<span class="built_in">UPPER</span>(FIRST_NAME||<span class="string">' '</span>||LAST_NAME))</span><br><span class="line"><span class="keyword">SELECT</span> EMP_ID <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> <span class="built_in">UPPER</span>(FIRST_NAME||<span class="string">' '</span>||LAST_NAME)=<span class="string">'JOHN DOE'</span></span><br></pre></td></tr></table></figure>
<p>另外Phoenix的索引分为<strong>Global Indexes</strong> 和 <strong>Local Indexes</strong>,官方文档提到，Global Index适合适用于<strong>读多写少</strong>的场景，Local Index适合<strong>频繁写</strong>的场景，那么这两种索引到底有什么区别呢？</p>
<h1 id="1-建立数据表，明确需求"><a href="#1-建立数据表，明确需求" class="headerlink" title="1 建立数据表，明确需求"></a>1 建立数据表，明确需求</h1><p>因为是课题需要，已经存在一张数据表<code>BIGJOY.IMOS</code>，大概有400万行的数据，最初就是使用Phoenix建立的，给大家看一下该表的结构，注意该cell不是HBase的Cell，不要混淆。</p>
<table>
<thead>
<tr>
<th>COLUMN_NAME</th>
<th>DATA_TYPE</th>
<th>TYPE_NAME</th>
</tr>
</thead>
<tbody>
<tr>
<td>ID</td>
<td>1</td>
<td>CHAR</td>
</tr>
<tr>
<td>FLOOR</td>
<td>1</td>
<td>CHAR</td>
</tr>
<tr>
<td>TIME</td>
<td>93</td>
<td>TIMESTAMP</td>
</tr>
<tr>
<td>MAC</td>
<td>1</td>
<td>CHAR</td>
</tr>
<tr>
<td>X</td>
<td>4</td>
<td>INTEGER</td>
</tr>
<tr>
<td>Y</td>
<td>4</td>
<td>INTEGER</td>
</tr>
<tr>
<td>CELL</td>
<td>1</td>
<td>CHAR</td>
</tr>
</tbody>
</table>
<p><strong>需求:</strong>1.根据mac和time约束查询cell;2.根据cell和time约束查询mac。以需求1为例，探索Phoenix Secondary Index的工作原理。</p>
<h1 id="2-对比案例"><a href="#2-对比案例" class="headerlink" title="2 对比案例"></a>2 对比案例</h1><p>为了方便和严谨，本文建立索引前后进行了下面的八个查询，也是从这八个查询探究Phoenix Secondary Index，下面就先列出这8个查询语句。</p>
<table>
<thead>
<tr>
<th>编号</th>
<th>SQl</th>
<th>查询结果</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td><code>select cell from bigjoy.imos where mac = &#39;28E14CA61635&#39;;</code></td>
<td>28条记录</td>
</tr>
<tr>
<td>2</td>
<td><code>select time from bigjoy.imos where mac = &#39;28E14CA61635&#39;;</code></td>
<td>28条记录</td>
</tr>
<tr>
<td>3</td>
<td><code>select floor from bigjoy.imos where mac = &#39;28E14CA61635&#39;;</code></td>
<td>28条记录</td>
</tr>
<tr>
<td>4</td>
<td><code>select * from bigjoy.imos where mac = &#39;28E14CA61635&#39;;</code></td>
<td>28条记录</td>
</tr>
<tr>
<td>5</td>
<td><code>select mac from bigjoy.imos where time = to_date(&#39;2014-04-01 20:39:42.000&#39;);</code></td>
<td>223条记录</td>
</tr>
<tr>
<td>6</td>
<td><code>select cell from bigjoy.imos where time = to_date(&#39;2014-04-01 20:39:42.000&#39;);</code></td>
<td>223条记录</td>
</tr>
<tr>
<td>7</td>
<td><code>select cell from bigjoy.imos where mac = &#39;28E14CA61635&#39; and time = to_date(&#39;2014-04-01 20:39:42.000&#39;);</code></td>
<td>1条记录</td>
</tr>
<tr>
<td>8</td>
<td><code>select * from bigjoy.imos where mac = &#39;28E14CA61635&#39; and time = to_date(&#39;2014-04-01 20:39:42.000&#39;);</code></td>
<td>1条记录</td>
</tr>
</tbody>
</table>
<h1 id="3-建立mac-time全局索引"><a href="#3-建立mac-time全局索引" class="headerlink" title="3 建立mac-time全局索引"></a>3 建立mac-time全局索引</h1><p>下面建立针对mac的索引</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> bigjoy.mac_idx <span class="keyword">on</span> bigjoy.imos (mac,<span class="keyword">time</span>) <span class="keyword">include</span> (cell)</span><br><span class="line"># <span class="keyword">global</span> <span class="keyword">index</span> default.</span><br></pre></td></tr></table></figure>
<h1 id="4-效率对比"><a href="#4-效率对比" class="headerlink" title="4 效率对比"></a>4 效率对比</h1><p>针对2中的8条SQL，再次进行查询，与建立索引前的对比如下表:</p>
<table>
<thead>
<tr>
<th>编号</th>
<th>建立索引前(秒)</th>
<th>建立索引后(秒)</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>7.236</td>
<td>0.175</td>
</tr>
<tr>
<td>2</td>
<td>6.553</td>
<td>0.029</td>
</tr>
<tr>
<td>3</td>
<td>7.581</td>
<td>6.826</td>
</tr>
<tr>
<td>4</td>
<td>7.171</td>
<td>6.616</td>
</tr>
<tr>
<td>5</td>
<td>7.129</td>
<td>9.926</td>
</tr>
<tr>
<td>6</td>
<td>7.258</td>
<td>7.039</td>
</tr>
<tr>
<td>7</td>
<td>7.632</td>
<td>0.026</td>
</tr>
<tr>
<td>8</td>
<td>7.682</td>
<td>7.383</td>
</tr>
</tbody>
</table>
<p>可以看出，建立索引是选择的是(mac,time)字段,并且包含了cell字段，以mac为约束查询time或cell字段效率提升很大，但当查询floor字段或者包含其他字段的时候，索引的存在并没有提升效率，以time为约束的查询在索引建立前后也没有效率上的改变。</p>
<p>下面就深入分析一下原因。</p>
<h2 id="4-1-查看一下数据表有木有变化"><a href="#4-1-查看一下数据表有木有变化" class="headerlink" title="4.1 查看一下数据表有木有变化"></a>4.1 查看一下数据表有木有变化</h2><p>索引建立好后，先使用Phoenix的 <code>!tables</code> 命令查看一下所用的数据表，从结果中可以看出多出了一个<strong>BIGJOY.MAC_IDX</strong>的数据表，如图所示。</p>
<p><img src="http://obqjd695a.bkt.clouddn.com/phoenix%E5%BB%BA%E7%AB%8B%E7%B4%A2%E5%BC%95%E5%90%8E%E5%A4%9A%E5%87%BA%E4%B8%80%E4%B8%AA%E6%95%B0%E6%8D%AE%E8%A1%A8.PNG" alt="使用Phoenix建立索引后多出一个数据表"></p>
<h2 id="4-2-探索索引表的结构"><a href="#4-2-探索索引表的结构" class="headerlink" title="4.2 探索索引表的结构"></a>4.2 探索索引表的结构</h2><p>首先看一下该表都有哪些字段呀！</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:phoenix:localhost&gt; !describe bigjoy.mac_idx</span><br><span class="line">+------------+--------------+-------------+--------------+------------+------------+--------------+----------------+-----------------+-----------------+-----+</span><br><span class="line">|<span class="string"> TABLE_CAT  </span>|<span class="string"> TABLE_SCHEM  </span>|<span class="string"> TABLE_NAME  </span>|<span class="string"> COLUMN_NAME  </span>|<span class="string"> DATA_TYPE  </span>|<span class="string"> TYPE_NAME  </span>|<span class="string"> COLUMN_SIZE  </span>|<span class="string"> BUFFER_LENGTH  </span>|<span class="string"> DECIMAL_DIGITS  </span>|<span class="string"> NUM_PREC_RADIX  </span>|<span class="string"> NUL </span>|</span><br><span class="line">+------------+--------------+-------------+--------------+------------+------------+--------------+----------------+-----------------+-----------------+-----+</span><br><span class="line">|<span class="string">            </span>|<span class="string"> BIGJOY       </span>|<span class="string"> MAC_IDX     </span>|<span class="string"> 0:MAC        </span>|<span class="string"> 12         </span>|<span class="string"> VARCHAR    </span>|<span class="string"> 12           </span>|<span class="string"> null           </span>|<span class="string"> null            </span>|<span class="string"> null            </span>|<span class="string"> 1   </span>|</span><br><span class="line">|<span class="string">            </span>|<span class="string"> BIGJOY       </span>|<span class="string"> MAC_IDX     </span>|<span class="string"> 0:TIME       </span>|<span class="string"> 3          </span>|<span class="string"> DECIMAL    </span>|<span class="string"> null         </span>|<span class="string"> null           </span>|<span class="string"> null            </span>|<span class="string"> null            </span>|<span class="string"> 1   </span>|</span><br><span class="line">|<span class="string">            </span>|<span class="string"> BIGJOY       </span>|<span class="string"> MAC_IDX     </span>|<span class="string"> :ID          </span>|<span class="string"> 1          </span>|<span class="string"> CHAR       </span>|<span class="string"> 26           </span>|<span class="string"> null           </span>|<span class="string"> null            </span>|<span class="string"> null            </span>|<span class="string"> 0   </span>|</span><br><span class="line">|<span class="string">            </span>|<span class="string"> BIGJOY       </span>|<span class="string"> MAC_IDX     </span>|<span class="string"> 0:CELL       </span>|<span class="string"> 1          </span>|<span class="string"> CHAR       </span>|<span class="string"> 4            </span>|<span class="string"> null           </span>|<span class="string"> null            </span>|<span class="string"> null            </span>|<span class="string"> 1   </span>|</span><br><span class="line">+------------+--------------+-------------+--------------+------------+------------+--------------+----------------+-----------------+-----------------+-----+</span><br></pre></td></tr></table></figure>
<p>注意，Phoenix把原来的TimeStamp类型的时间变成了Decimal，应该是用整数的时间戳来表示时间了，这样运算起来简单！</p>
<p>接下来看一下该表的主键构成<code>!primarykeys bigjoy.mac_idx</code>，结果如下。</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">+------------+--------------+-------------+--------------+----------+----------+--------------+------------+------------+--------------+-+</span><br><span class="line">|<span class="string"> TABLE_CAT  </span>|<span class="string"> TABLE_SCHEM  </span>|<span class="string"> TABLE_NAME  </span>|<span class="string"> COLUMN_NAME  </span>|<span class="string"> KEY_SEQ  </span>|<span class="string"> PK_NAME  </span>|<span class="string"> ASC_OR_DESC  </span>|<span class="string"> DATA_TYPE  </span>|<span class="string"> TYPE_NAME  </span>|<span class="string"> COLUMN_SIZE  </span>|<span class="string"> </span>|</span><br><span class="line">+------------+--------------+-------------+--------------+----------+----------+--------------+------------+------------+--------------+-+</span><br><span class="line">|<span class="string">            </span>|<span class="string"> BIGJOY       </span>|<span class="string"> MAC_IDX     </span>|<span class="string"> 0:MAC        </span>|<span class="string"> 1        </span>|<span class="string">          </span>|<span class="string"> A            </span>|<span class="string"> 12         </span>|<span class="string"> VARCHAR    </span>|<span class="string"> 12           </span>|<span class="string"> </span>|</span><br><span class="line">|<span class="string">            </span>|<span class="string"> BIGJOY       </span>|<span class="string"> MAC_IDX     </span>|<span class="string"> 0:TIME       </span>|<span class="string"> 2        </span>|<span class="string">          </span>|<span class="string"> A            </span>|<span class="string"> 3          </span>|<span class="string"> DECIMAL    </span>|<span class="string"> null         </span>|<span class="string"> </span>|</span><br><span class="line">|<span class="string">            </span>|<span class="string"> BIGJOY       </span>|<span class="string"> MAC_IDX     </span>|<span class="string"> :ID          </span>|<span class="string"> 3        </span>|<span class="string">          </span>|<span class="string"> A            </span>|<span class="string"> 1          </span>|<span class="string"> CHAR       </span>|<span class="string"> 26           </span>|<span class="string"> </span>|</span><br><span class="line">+------------+--------------+-------------+--------------+----------+----------+--------------+------------+------------+--------------+-+</span><br></pre></td></tr></table></figure>
<p>可以看出，该表的主键是由0:MAC,0:TIME,:ID按顺序构成的，不过:ID是什么玩意儿，是原数据表的主键？为了验证猜想，请接着看(｡･ω･)</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:phoenix:localhost&gt; select * from bigjoy.mac<span class="emphasis">_idx limit 1;</span></span><br><span class="line"><span class="emphasis">+---------------+------------------+-----------------------------+---------+</span></span><br><span class="line"><span class="emphasis">|     0:MAC     |      0:TIME      |             :ID             | 0:CELL  |</span></span><br><span class="line"><span class="emphasis">+---------------+------------------+-----------------------------+---------+</span></span><br><span class="line"><span class="emphasis">| 000000000C00  | 1.396363024E+12  | 02281396334224000000000C00  | 228     |</span></span><br><span class="line"><span class="emphasis">+---------------+------------------+-----------------------------+---------+</span></span><br><span class="line"><span class="emphasis">1 row selected (0.123 seconds)</span></span><br></pre></td></tr></table></figure>
<p>这里也可以看出该索引表（是真的能被用户看到的表哈）包含了4个字段，前三个刚才讲了，是构成主键的组成部分，0:CELL很好理解，就是创建索引时include 后边的cell字段了。有:ID了不是，好的，去hbase shell中利用:ID查询一下数据！</p>
<figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">hbase(main):038:0&gt; get 'BIGJOY.IMOS','02281396334224000000000C00'</span><br><span class="line">COLUMN                                   CELL                                                                                                                 </span><br><span class="line"> 0:CELL                                  timestamp=1470667019714, value=228        </span><br><span class="line"> 0:FLOOR                                 timestamp=1470667019714, value=20010    </span><br><span class="line"> 0:MAC                                   timestamp=1470667019714, value=000000000C00</span><br><span class="line"> 0:TIME                                  timestamp=1470667019714, value=<span class="symbol">\x</span>80<span class="symbol">\x</span>00<span class="symbol">\x</span>01E<span class="symbol">\x</span>1D<span class="symbol">\x</span>B8<span class="symbol">\x</span>D6<span class="symbol">\x</span>80<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>00</span><br><span class="line"> 0:X                                     timestamp=1470667019714, value=<span class="symbol">\x</span>80<span class="symbol">\x</span>01<span class="symbol">\x</span>85<span class="symbol">\x</span>1D</span><br><span class="line"> 0:Y                                     timestamp=1470667019714, value=<span class="symbol">\x</span>80<span class="symbol">\x</span>01<span class="symbol">\x</span>82<span class="symbol">\x</span>E8</span><br><span class="line"> 0:_0                                    timestamp=1470667019714, value=x                                                                                     </span><br><span class="line">7 row(s) in 0.0260 seconds</span><br></pre></td></tr></table></figure>
<p>嗯，果不其然呀，<strong> :ID在索引表中参与构成主键，首先是保证了索引表主键的唯一性，因此Global Index是密集索引，另外，它对查询也是有帮助的</strong>，埋个伏笔，下面会提到！</p>
<h2 id="4-3-查询计划解读"><a href="#4-3-查询计划解读" class="headerlink" title="4.3 查询计划解读"></a>4.3 查询计划解读</h2><h3 id="4-3-1-Phoenix提供了Explain命令，解释执行计划，下面先看mac约束的对比吧，咣当咣当真是够长的-￣ˇ￣"><a href="#4-3-1-Phoenix提供了Explain命令，解释执行计划，下面先看mac约束的对比吧，咣当咣当真是够长的-￣ˇ￣" class="headerlink" title="4.3.1 Phoenix提供了Explain命令，解释执行计划，下面先看mac约束的对比吧，咣当咣当真是够长的(￣ˇ￣)"></a>4.3.1 Phoenix提供了Explain命令，解释执行计划，下面先看mac约束的对比吧，咣当咣当真是够长的(￣ˇ￣)</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">0: jdbc:phoenix:localhost&gt; explain select cell from bigjoy.imos where mac = <span class="emphasis">'28E14CA61635'</span>;</span><br><span class="line"><span class="code">+-----------------------------------------------------------------------------------------------------------+</span></span><br><span class="line">|                                                   PLAN                                                    |</span><br><span class="line"><span class="code">+-----------------------------------------------------------------------------------------------------------+</span></span><br><span class="line">| CLIENT 1-CHUNK 0 ROWS 0 BYTES PARALLEL 1-WAY ROUND ROBIN RANGE SCAN OVER BIGJOY.MAC<span class="emphasis">_IDX ['28E14CA61635']  |</span></span><br><span class="line"><span class="emphasis">+-----------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="emphasis">1 row selected (0.584 seconds)</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">0: jdbc:phoenix:localhost&gt; explain select time from bigjoy.imos where mac = '28E14CA61635';</span></span><br><span class="line"><span class="emphasis">+-----------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="emphasis">|                                                   PLAN                                                    |</span></span><br><span class="line"><span class="emphasis">+-----------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="emphasis">| CLIENT 1-CHUNK 0 ROWS 0 BYTES PARALLEL 1-WAY ROUND ROBIN RANGE SCAN OVER BIGJOY.MAC_</span>IDX [<span class="emphasis">'28E14CA61635'</span>]  |</span><br><span class="line">|     SERVER FILTER BY FIRST KEY ONLY                                                                       |</span><br><span class="line"><span class="code">+-----------------------------------------------------------------------------------------------------------+</span></span><br><span class="line">2 rows selected (0.038 seconds)</span><br><span class="line"></span><br><span class="line">0: jdbc:phoenix:localhost&gt; explain select * from bigjoy.imos where mac = <span class="emphasis">'28E14CA61635'</span>;</span><br><span class="line"><span class="code">+------------------------------------------------------------------------------------------------------+</span></span><br><span class="line">|                                                 PLAN                                                 |</span><br><span class="line"><span class="code">+------------------------------------------------------------------------------------------------------+</span></span><br><span class="line">| CLIENT 6-CHUNK 22526956 ROWS 1258291413 BYTES PARALLEL 1-WAY ROUND ROBIN FULL SCAN OVER BIGJOY.IMOS  |</span><br><span class="line">|     SERVER FILTER BY MAC = <span class="emphasis">'28E14CA61635'</span>                                                            |</span><br><span class="line"><span class="code">+------------------------------------------------------------------------------------------------------+</span></span><br><span class="line">2 rows selected (0.038 seconds)</span><br><span class="line"></span><br><span class="line">0: jdbc:phoenix:localhost&gt; explain select * from bigjoy.imos where mac = <span class="emphasis">'28E14CA61635'</span>;</span><br><span class="line"><span class="code">+------------------------------------------------------------------------------------------------------+</span></span><br><span class="line">|                                                 PLAN                                                 |</span><br><span class="line"><span class="code">+------------------------------------------------------------------------------------------------------+</span></span><br><span class="line">| CLIENT 6-CHUNK 22526956 ROWS 1258291413 BYTES PARALLEL 1-WAY ROUND ROBIN FULL SCAN OVER BIGJOY.IMOS  |</span><br><span class="line">|     SERVER FILTER BY MAC = <span class="emphasis">'28E14CA61635'</span>                                                            |</span><br><span class="line"><span class="code">+------------------------------------------------------------------------------------------------------+</span></span><br><span class="line">2 rows selected (0.036 seconds)</span><br></pre></td></tr></table></figure>
<p>看到这里就明白了吧，当查询cell字段的时候，是直接去索引表了提取出了cell的值；但当包含了创建索引表时没有提供的字段的时候，Phoenix就是回到原数据表进行全表扫描了，不过是最终在服务器端进行了Filter过滤而已，关于为什么使用了Filter还是进行的全表扫描哦，可以参见<a href="http://dequn.github.io/2016/08/24/right-way-to-use-hbase-rowfilter_and_accelerate_hbase_query/">HBase RowFilter 的使用误区及如何加快 HBase 查询速度</a>！</p>
<h3 id="4-3-2-那么接下来看一下time约束的索引查询计划！"><a href="#4-3-2-那么接下来看一下time约束的索引查询计划！" class="headerlink" title="4.3.2 那么接下来看一下time约束的索引查询计划！"></a>4.3.2 那么接下来看一下time约束的索引查询计划！</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">0: jdbc:phoenix:localhost&gt; explain select cell from bigjoy.imos where time = to<span class="emphasis">_date('2014-04-01 20:39:42.000');</span></span><br><span class="line"><span class="emphasis">+-----------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="emphasis">|                                          PLAN                                           |</span></span><br><span class="line"><span class="emphasis">+-----------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="emphasis">| CLIENT 4-CHUNK 0 ROWS 0 BYTES PARALLEL 1-WAY ROUND ROBIN FULL SCAN OVER BIGJOY.MAC_</span>IDX  |</span><br><span class="line">|     SERVER FILTER BY TO<span class="emphasis">_TIMESTAMP("TIME") = TIMESTAMP '2014-04-01 20:39:42.000'         |</span></span><br><span class="line"><span class="emphasis">+-----------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="emphasis">2 rows selected (0.062 seconds)</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">0: jdbc:phoenix:localhost&gt; explain select * from bigjoy.imos where time = to_</span>date(<span class="emphasis">'2014-04-01 20:39:42.000'</span>);</span><br><span class="line"><span class="code">+------------------------------------------------------------------------------------------------------+</span></span><br><span class="line">|                                                 PLAN                                                 |</span><br><span class="line"><span class="code">+------------------------------------------------------------------------------------------------------+</span></span><br><span class="line">| CLIENT 6-CHUNK 22526956 ROWS 1258291413 BYTES PARALLEL 1-WAY ROUND ROBIN FULL SCAN OVER BIGJOY.IMOS  |</span><br><span class="line">|     SERVER FILTER BY TIME = TIMESTAMP <span class="emphasis">'2014-04-01 20:39:42.000'</span>                                      |</span><br><span class="line"><span class="code">+------------------------------------------------------------------------------------------------------+</span></span><br><span class="line">2 rows selected (0.039 seconds)</span><br></pre></td></tr></table></figure>
<p>可以看出，仅有time约束的时候，不管进行的是cell查询还是包含其他字段的查询，都是进行全表扫描，不过一个是扫描索引表，一个是原数据表罢了！所以效率没有提升</p>
<h3 id="4-3-3-最后，同时进行mac和time约束查询，从时间对比上就可以猜想是进行了索引表的查询，当然，查询目标不能包含创建索引表时未包含的字段-事实也是如此。"><a href="#4-3-3-最后，同时进行mac和time约束查询，从时间对比上就可以猜想是进行了索引表的查询，当然，查询目标不能包含创建索引表时未包含的字段-事实也是如此。" class="headerlink" title="4.3.3 最后，同时进行mac和time约束查询，从时间对比上就可以猜想是进行了索引表的查询，当然，查询目标不能包含创建索引表时未包含的字段,事实也是如此。"></a>4.3.3 最后，同时进行mac和time约束查询，从时间对比上就可以猜想是进行了索引表的查询，当然，查询目标不能包含创建索引表时未包含的字段,事实也是如此。</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">0: jdbc:phoenix:localhost&gt; explain select cell from bigjoy.imos where mac = <span class="emphasis">'28E14CA61635'</span> and time = to<span class="emphasis">_date('2014-04-01 20:39:42.000');</span></span><br><span class="line"><span class="emphasis">+-----------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="emphasis">|                                                            PLAN                                                             |</span></span><br><span class="line"><span class="emphasis">+-----------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="emphasis">| CLIENT 1-CHUNK 0 ROWS 0 BYTES PARALLEL 1-WAY ROUND ROBIN RANGE SCAN OVER BIGJOY.MAC_</span>IDX [<span class="emphasis">'28E14CA61635'</span>,1,396,384,782,000]  |</span><br><span class="line"><span class="code">+-----------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class="line">1 row selected (0.049 seconds)</span><br><span class="line"></span><br><span class="line">0: jdbc:phoenix:localhost&gt; explain select * from bigjoy.imos where mac = <span class="emphasis">'28E14CA61635'</span> and time = to<span class="emphasis">_date('2014-04-01 20:39:42.000');</span></span><br><span class="line"><span class="emphasis">+------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="emphasis">|                                                 PLAN                                                 |</span></span><br><span class="line"><span class="emphasis">+------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="emphasis">| CLIENT 6-CHUNK 22526956 ROWS 1258291413 BYTES PARALLEL 1-WAY ROUND ROBIN FULL SCAN OVER BIGJOY.IMOS  |</span></span><br><span class="line"><span class="emphasis">|     SERVER FILTER BY (MAC = '28E14CA61635' AND TIME = TIMESTAMP '2014-04-01 20:39:42.000')           |</span></span><br><span class="line"><span class="emphasis">+------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="emphasis">2 rows selected (0.034 seconds)</span></span><br></pre></td></tr></table></figure>
<h3 id="4-3-4-还有，看一下官方给出的Index-Hint方法，可以看出，-ID参与索引表的构成，也是为了实现这一个目的，先查索引表，在根据ID查原表！"><a href="#4-3-4-还有，看一下官方给出的Index-Hint方法，可以看出，-ID参与索引表的构成，也是为了实现这一个目的，先查索引表，在根据ID查原表！" class="headerlink" title="4.3.4 还有，看一下官方给出的Index Hint方法，可以看出，:ID参与索引表的构成，也是为了实现这一个目的，先查索引表，在根据ID查原表！"></a>4.3.4 还有，看一下官方给出的<a href="https://phoenix.apache.org/secondary_indexing.html" target="_blank" rel="noopener">Index Hint</a>方法，可以看出，:ID参与索引表的构成，也是为了实现这一个目的，先查索引表，在根据ID查原表！</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:phoenix:localhost&gt; explain select /<span class="strong">*+ INDEX(bigjoy.imos mac_idx) *</span>/ * from bigjoy.imos where mac = <span class="emphasis">'28E14CA61635'</span>;</span><br><span class="line"><span class="code">+-------------------------------------------------------------------------------------------------------------------+</span></span><br><span class="line">|                                                       PLAN                                                        |</span><br><span class="line"><span class="code">+-------------------------------------------------------------------------------------------------------------------+</span></span><br><span class="line">| CLIENT 6-CHUNK 22526956 ROWS 1258291413 BYTES PARALLEL 1-WAY ROUND ROBIN FULL SCAN OVER BIGJOY.IMOS               |</span><br><span class="line">|     SKIP-SCAN-JOIN TABLE 0                                                                                        |</span><br><span class="line">|         CLIENT 1-CHUNK 0 ROWS 0 BYTES PARALLEL 1-WAY ROUND ROBIN RANGE SCAN OVER BIGJOY.MAC<span class="emphasis">_IDX ['28E14CA61635']  |</span></span><br><span class="line"><span class="emphasis">|             SERVER FILTER BY FIRST KEY ONLY                                                                       |</span></span><br><span class="line"><span class="emphasis">|     DYNAMIC SERVER FILTER BY "BIGJOY.IMOS.ID" IN ($25.$27)                                                        |</span></span><br><span class="line"><span class="emphasis">+-------------------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="emphasis">5 rows selected (0.041 seconds)</span></span><br></pre></td></tr></table></figure>
<h2 id="4-4-什么时候索引发挥作用，什么时候索引不发挥作用（都是指全局索引）？"><a href="#4-4-什么时候索引发挥作用，什么时候索引不发挥作用（都是指全局索引）？" class="headerlink" title="4.4 什么时候索引发挥作用，什么时候索引不发挥作用（都是指全局索引）？"></a>4.4 什么时候索引发挥作用，什么时候索引不发挥作用（都是指全局索引）？</h2><p>通过以上几个例子对比和查询计划分析，并且结合索引表的主键构成(谁让HBase有且只有主键的字典序索引呢)，查询字段只包括创建索引时的字段并且约束条件中包括<strong>构成索引表主键的第一个字段</strong>时，索引表时发挥作用的，其他情况下全局索引不能加快查询速度，这也和官方文档给出的解释是一样样的！</p>
<p>文中使用的例子只包括两个字段约束，如果有三个字段呢,结果又如何？如：(field1, field2, field3)，可以猜想使用field1, field1 + field2, field1 + field3, field1 + field2 + field3进行约束查询，该索引表才会发挥作用！感兴趣的可以去尝试一下！</p>
<p>为什么是这样？还是因为HBase只有字典序的主键索引啊，如果不使用field1进行约束，那么将不能确定索引表中行健的扫描范围，所以仍然要进行全局扫描（索引表或者原数据表），同理，如果查询结果一下，使用field1 + field2 约束理论上是要优于 field1 + field3的，不过既然查询结果都一样了，那么field2 和 field3应该是没有约束作用的，除非field3 == field3。感兴趣的也可以尝试一下！</p>
<h1 id="5总结"><a href="#5总结" class="headerlink" title="5总结"></a>5总结</h1><ul>
<li>Global Index 是密集索引；</li>
<li>要想索引发挥作用，必须包含创建索引是的第一个字段进行约束；</li>
<li>索引字段从前到后，约束越多，查询效率越高（中间不能跳过索引字段），这样可以快速缩小扫描范围；</li>
<li>查询一定不能有索引字段之外的其他字段，不然得去扫描原表；</li>
<li>不满足上一条结论的要求时，官方文档提供的<a href="https://phoenix.apache.org/secondary_indexing.html" target="_blank" rel="noopener">Index Hint</a>方法，是根据索引表得到原表主键，再去原表中根据主键查询其他字段！</li>
</ul>
<p>Local Index 就留着下一次写吧！</p>

    </main>
    <footer class="post-footer">
      
      
      <div class="post-tags">
        
        
        
        
        <a class="post-tag button" href="/tags/HBase/" style="background: #fc6423;" rel="tag"><i class="fas fa-tags"></i>HBase</a>
        
        <a class="post-tag button" href="/tags/Secondary-Index/" style="background: #a3bb54;" rel="tag"><i class="fas fa-tags"></i>Secondary Index</a>
        
        <a class="post-tag button" href="/tags/Phoenix/" style="background: #47aaff;" rel="tag"><i class="fas fa-tags"></i>Phoenix</a>
        
        <a class="post-tag button" href="/tags/Global-Index/" style="background: #fc6423;" rel="tag"><i class="fas fa-tags"></i>Global Index</a>
        
      </div>
      
    </footer>
  </article>
  
  
<div class="reward" id="reward">
  <p>坚持原创技术分享，您的支持是我前进的动力！</p>
  <button id="reward-button" class="button" disable="enable">Reward</button>
  <div id="qr" class="qr" style="display: none;">
    
    
    
  </div>
</div>


  
  
  <div class="post-nav">
    <div class="post-nav-next post-nav-item">
      
      <a href="/2016/08/29/HBase-Secondary-Index-Theory/" rel="next" title="HBase 二级索引实现原理"><i class="fas fa-angle-left"></i><span class="nav-title">HBase 二级索引实现原理</span></a>
      
    </div>
    <div class="post-nav-prev post-nav-item">
      
      <a href="/2016/09/02/Phoenix-Secondary-Index-Exploration-Local-Index/" rel="prev" title="Phoenix Secondary Index初探之Local Index"><span class="nav-title">Phoenix Secondary Index初探之Local Index</span><i class="fas fa-angle-right"></i></a>
      
    </div>
  </div>
  
  
</section>

          </div>
          
          
          
<aside class="sidebar" id="sidebar" style="background: url(/images/sidebar_background.png);">
  
  
<div class="info sidebar-item" id="info">
  
  <img class="author-avatar" src="https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcTL1rxWN2-S8kC34oi2QhbeQdm1hRAhzQTEpm5AFhnG3tJ-ccTI" alt="dequn">
  
  <h1 class="author-name">dequn</h1>
  <h2 class="author-description"> 这些文章没啥用</h2>
  <div class="site-count">
    
    <div class="archives-count">
      <div class="site-count-title">Archives</div>
      <div><a href="/archives/">42</a></div>
    </div>
    
    
    
    <span class="site-count-divider divider">|</span>
    
    <div class="categories-count">
      <div class="site-count-title">Categories</div>
      <div><a href="/categories/">11</a></div>
    </div>
    
    
    
    <span class="site-count-divider divider">|</span>
    
    <div class="tags-count">
      <div class="site-count-title">Tags</div>
      <div><a href="/tags/">56</a></div>
    </div>
    
  </div>
  
  <div class="rss">
    <a class="rss-link button sidebar-item" href="/atom.xml"><i class="fas fa-rss"></i>RSS</a>
  </div>
  
</div>


  <div class="sidebar-sticky">
    
    




<hr>
<div class="post-toc sidebar-item" id="toc-div">
  <div><i class="fas fa-list-ol"></i>Table of Contents</div>
  <div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-建立数据表，明确需求"><span class="toc-text">1 建立数据表，明确需求</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-对比案例"><span class="toc-text">2 对比案例</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-建立mac-time全局索引"><span class="toc-text">3 建立mac-time全局索引</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-效率对比"><span class="toc-text">4 效率对比</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-查看一下数据表有木有变化"><span class="toc-text">4.1 查看一下数据表有木有变化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-探索索引表的结构"><span class="toc-text">4.2 探索索引表的结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-查询计划解读"><span class="toc-text">4.3 查询计划解读</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-1-Phoenix提供了Explain命令，解释执行计划，下面先看mac约束的对比吧，咣当咣当真是够长的-￣ˇ￣"><span class="toc-text">4.3.1 Phoenix提供了Explain命令，解释执行计划，下面先看mac约束的对比吧，咣当咣当真是够长的(￣ˇ￣)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-2-那么接下来看一下time约束的索引查询计划！"><span class="toc-text">4.3.2 那么接下来看一下time约束的索引查询计划！</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-3-最后，同时进行mac和time约束查询，从时间对比上就可以猜想是进行了索引表的查询，当然，查询目标不能包含创建索引表时未包含的字段-事实也是如此。"><span class="toc-text">4.3.3 最后，同时进行mac和time约束查询，从时间对比上就可以猜想是进行了索引表的查询，当然，查询目标不能包含创建索引表时未包含的字段,事实也是如此。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-4-还有，看一下官方给出的Index-Hint方法，可以看出，-ID参与索引表的构成，也是为了实现这一个目的，先查索引表，在根据ID查原表！"><span class="toc-text">4.3.4 还有，看一下官方给出的Index Hint方法，可以看出，:ID参与索引表的构成，也是为了实现这一个目的，先查索引表，在根据ID查原表！</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-4-什么时候索引发挥作用，什么时候索引不发挥作用（都是指全局索引）？"><span class="toc-text">4.4 什么时候索引发挥作用，什么时候索引不发挥作用（都是指全局索引）？</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5总结"><span class="toc-text">5总结</span></a></li></ol></div>
</div>



    
    
    
<hr>
<div class="social-link sidebar-item">
  <div><i class="far fa-address-card"></i>Social Links</p></div>
  <ul>
    
    <li><i class="fas fa-envelope"></i><a href="mailto:dqzhangchn@gmail.com" target="_blank">E-Mail</a></li>
    
    <li><i class="fab fa-github"></i><a href="https://github.com/dequn" target="_blank">GitHub</a></li>
    
  </ul>
</div>


    
    
  </div>
</aside>


          
        </div>
      </div>
    </main>
    
<footer id="footer" class="footer" style="background: #33363b;">
  <div class="container">
    <div class="back-to-top">
      <a id="back-to-top"><i class="fas fa-angle-double-up"></i></a>
    </div>
    <div class="footer-container">
      <div class="footer-left">
        <div class="copyright">
          <span class="author">dequn</span><span class="year"><i class="far fa-copyright"></i>2018</span>
        </div>
        
        
<div class="busuanzi">
  <span id="busuanzi_container_site_pv"><i class="fas fa-eye"></i><span id="busuanzi_value_site_pv"></span></span><span id="busuanzi_container_site_uv"><i class="fas fa-user"></i><span id="busuanzi_value_site_uv"></span></span><span id="busuanzi_container_page_pv"><i class="far fa-file-alt"></i><span id="busuanzi_value_page_pv"></span></span>
</div>


        
      </div>
      <div class="footer-right">
        <div class="custom-info">
          
          托管于<i class="fab fa-github-alt"></i><a href="https://pages.github.com/" target="_blank">GitHub Pages</a>
          
        </div>
        <div class="powered-by">
          Proudly Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> | Theme is <a href="https://github.com/AlynxZhou/hexo-theme-aria/" target="_blank">ARIA</a>
        </div>
      </div>
    </div>
  </div>
</footer>


  </body>
</html>
