<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="这些文章没啥用"><title>Phoenix Secondary Index初探之Local Index | dequn's blog</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/7.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create','UA-105163669-1','auto');ga('send','pageview');</script></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Phoenix Secondary Index初探之Local Index</h1><a id="logo" href="/.">dequn's blog</a><p class="description">这些文章没啥用</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> About</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Phoenix Secondary Index初探之Local Index</h1><div class="post-meta">Sep 2, 2016<span> | </span><span class="category"><a href="/categories/Phoenix/">Phoenix</a></span></div><a data-disqus-identifier="2016/09/02/Phoenix-Secondary-Index-Exploration-Local-Index/" href="/2016/09/02/Phoenix-Secondary-Index-Exploration-Local-Index/#disqus_thread" class="disqus-comment-count"></a><div class="post-content"><p>上一篇探索了 Phoenix 的 Global Index，这一次来看一看 Local Index 的实现原理。</p>
<p>首先需要说明的是实验采用的 Phoenix 版本号是4.8，从4.8开始，Phoenix 的Local Index 不再采用新建数据表的方式，从官方的描述中可以看出这一点变化：</p>
<blockquote>
<p>Unlike global indexes, all local indexes of a table are stored in a single, separate shared table prior to 4.8.0 version. From 4.8.0 onwards we are storing all local index data in the separate shadow column families in the same data table. </p>
</blockquote>
<p>不过什么是 <strong>shadow column families</strong>? 这一点确实把我弄蒙了，百度 Google 都没有搜出相关的概念，先不管那么多了，先心无旁骛的直奔目标吧。</p>
<p>需要说明的另一点是由于上一次采用的表数据量有些大，在建立 Local Index总是出错，使用 <code>!tables</code> 命令查看索引表总是处于 <strong>BUILDING</strong> 状态，所以这次新建了一个表进行试验，原理明白就好。</p>
<h1 id="1-新建数据表、索引和插入数据"><a href="#1-新建数据表、索引和插入数据" class="headerlink" title="1.新建数据表、索引和插入数据"></a>1.新建数据表、索引和插入数据</h1><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> TABLE <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> zdq.test (id BIGINT <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">PRIMARY</span> <span class="keyword">KEY</span>, X INTEGER, Y INTEGER, Z INTEGER, M DECIMAL, N SMALLINT);</span><br><span class="line">ALTER TABLE zdq.test set IMMUTABLE_ROWS = true; # can not set local <span class="keyword">index</span> <span class="keyword">if</span> IMMUTABLE_ROWS = fasle <span class="keyword">or</span> need <span class="keyword">set</span> hbse-site.xml</span><br><span class="line"><span class="keyword">CREATE</span> LOCAL <span class="keyword">INDEX</span> X_IDX <span class="keyword">ON</span> zdq.test (x);</span><br><span class="line"><span class="keyword">CREATE</span> LOCAL <span class="keyword">INDEX</span> Y_IDX <span class="keyword">ON</span> zdq.test (y);</span><br><span class="line"><span class="keyword">CREATE</span> LOCAL <span class="keyword">INDEX</span> Z_IDX <span class="keyword">ON</span> zdq.test (z);</span><br><span class="line"><span class="keyword">UPSERT</span> <span class="keyword">INTO</span> zdq.test (id, x, y, z, m, n) <span class="keyword">VALUES</span> (<span class="number">12345</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">UPSERT</span> <span class="keyword">INTO</span> zdq.test (id, x, y, z, m, n) <span class="keyword">VALUES</span> (<span class="number">123456</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">2</span>, <span class="number">1</span>);</span><br></pre></td></tr></table></figure>
<p>使用 <code>!tables</code> 查看一下数据表，发现多了<strong>四个表</strong>,一个主数据表，三个索引表。</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">+------------+--------------+-------------+---------------+----------+------------+----------------------------+-----------------+--------------+-----------------+---------------+---------------+--------+</span><br><span class="line">|<span class="string"> TABLE_CAT  </span>|<span class="string"> TABLE_SCHEM  </span>|<span class="string"> TABLE_NAME  </span>|<span class="string">  TABLE_TYPE   </span>|<span class="string"> REMARKS  </span>|<span class="string"> TYPE_NAME  </span>|<span class="string"> SELF_REFERENCING_COL_NAME  </span>|<span class="string"> REF_GENERATION  </span>|<span class="string"> INDEX_STATE  </span>|<span class="string"> IMMUTABLE_ROWS  </span>|<span class="string"> SALT_BUCKETS  </span>|<span class="string"> MULTI_TENANT  </span>|<span class="string"> VIEW_S </span>|</span><br><span class="line">+------------+--------------+-------------+---------------+----------+------------+----------------------------+-----------------+--------------+-----------------+---------------+---------------+--------+</span><br><span class="line">|<span class="string">            </span>|<span class="string"> ZDQ          </span>|<span class="string"> X_IDX       </span>|<span class="string"> INDEX         </span>|<span class="string">          </span>|<span class="string">            </span>|<span class="string">                            </span>|<span class="string">                 </span>|<span class="string"> ACTIVE       </span>|<span class="string"> true            </span>|<span class="string"> null          </span>|<span class="string"> false         </span>|<span class="string">        </span>|</span><br><span class="line">|<span class="string">            </span>|<span class="string"> ZDQ          </span>|<span class="string"> Y_IDX       </span>|<span class="string"> INDEX         </span>|<span class="string">          </span>|<span class="string">            </span>|<span class="string">                            </span>|<span class="string">                 </span>|<span class="string"> ACTIVE       </span>|<span class="string"> true            </span>|<span class="string"> null          </span>|<span class="string"> false         </span>|<span class="string">        </span>|</span><br><span class="line">|<span class="string">            </span>|<span class="string"> ZDQ          </span>|<span class="string"> Z_IDX       </span>|<span class="string"> INDEX         </span>|<span class="string">          </span>|<span class="string">            </span>|<span class="string">                            </span>|<span class="string">                 </span>|<span class="string"> ACTIVE       </span>|<span class="string"> true            </span>|<span class="string"> null          </span>|<span class="string"> false         </span>|<span class="string">        </span>|</span><br><span class="line">|<span class="string">            </span>|<span class="string"> SYSTEM       </span>|<span class="string"> CATALOG     </span>|<span class="string"> SYSTEM TABLE  </span>|<span class="string">          </span>|<span class="string">            </span>|<span class="string">                            </span>|<span class="string">                 </span>|<span class="string">              </span>|<span class="string"> false           </span>|<span class="string"> null          </span>|<span class="string"> false         </span>|<span class="string">        </span>|</span><br><span class="line">|<span class="string">            </span>|<span class="string"> SYSTEM       </span>|<span class="string"> FUNCTION    </span>|<span class="string"> SYSTEM TABLE  </span>|<span class="string">          </span>|<span class="string">            </span>|<span class="string">                            </span>|<span class="string">                 </span>|<span class="string">              </span>|<span class="string"> false           </span>|<span class="string"> null          </span>|<span class="string"> false         </span>|<span class="string">        </span>|</span><br><span class="line">|<span class="string">            </span>|<span class="string"> SYSTEM       </span>|<span class="string"> SEQUENCE    </span>|<span class="string"> SYSTEM TABLE  </span>|<span class="string">          </span>|<span class="string">            </span>|<span class="string">                            </span>|<span class="string">                 </span>|<span class="string">              </span>|<span class="string"> false           </span>|<span class="string"> null          </span>|<span class="string"> false         </span>|<span class="string">        </span>|</span><br><span class="line">|<span class="string">            </span>|<span class="string"> SYSTEM       </span>|<span class="string"> STATS       </span>|<span class="string"> SYSTEM TABLE  </span>|<span class="string">          </span>|<span class="string">            </span>|<span class="string">                            </span>|<span class="string">                 </span>|<span class="string">              </span>|<span class="string"> false           </span>|<span class="string"> null          </span>|<span class="string"> false         </span>|<span class="string">        </span>|</span><br><span class="line">|<span class="string">            </span>|<span class="string"> BIGJOY       </span>|<span class="string"> IMOS        </span>|<span class="string"> TABLE         </span>|<span class="string">          </span>|<span class="string">            </span>|<span class="string">                            </span>|<span class="string">                 </span>|<span class="string">              </span>|<span class="string"> true            </span>|<span class="string"> null          </span>|<span class="string"> false         </span>|<span class="string">        </span>|</span><br><span class="line">|<span class="string">            </span>|<span class="string"> ZDQ          </span>|<span class="string"> TEST        </span>|<span class="string"> TABLE         </span>|<span class="string">          </span>|<span class="string">            </span>|<span class="string">                            </span>|<span class="string">                 </span>|<span class="string">              </span>|<span class="string"> true            </span>|<span class="string"> null          </span>|<span class="string"> false         </span>|<span class="string">        </span>|</span><br><span class="line">+------------+--------------+-------------+---------------+----------+------------+----------------------------+-----------------+--------------+-----------------+---------------+---------------+--------+</span><br></pre></td></tr></table></figure>
<p>在 HBase Shell 中使用 <code>list</code> 命令查看一下，<strong>和 Global Index 不一样的是，只多出了一个表 ‘ZDQ.TEST’</strong>。</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">hbase</span><span class="params">(main)</span></span>:<span class="number">001</span>:<span class="number">0</span>&gt; list</span><br><span class="line">TABLE</span><br><span class="line">BIGJOY.IMOS</span><br><span class="line">BIGJOY.POIS</span><br><span class="line">BIGJOY.POIS_MAC_IDX</span><br><span class="line">SYSTEM.CATALOG</span><br><span class="line">SYSTEM.FUNCTION</span><br><span class="line">SYSTEM.SEQUENCE</span><br><span class="line">SYSTEM.STATS</span><br><span class="line">ZDQ.TEST</span><br><span class="line"><span class="number">8</span> row(s) <span class="keyword">in</span> <span class="number">0.2320</span> seconds</span><br><span class="line"></span><br><span class="line">=&gt; [<span class="string">"BIGJOY.IMOS"</span>, <span class="string">"BIGJOY.POIS"</span>, <span class="string">"BIGJOY.POIS_MAC_IDX"</span>, <span class="string">"SYSTEM.CATALOG"</span>, <span class="string">"SYSTEM.FUNCTION"</span>, <span class="string">"SYSTEM.SEQUENCE"</span>, <span class="string">"SYSTEM.STATS"</span>, <span class="string">"ZDQ.TEST"</span>]</span><br><span class="line"><span class="function"><span class="title">hbase</span><span class="params">(main)</span></span>:<span class="number">002</span>:<span class="number">0</span>&gt;</span><br></pre></td></tr></table></figure>
<h1 id="2-数据表、索引表结构探究"><a href="#2-数据表、索引表结构探究" class="headerlink" title="2.数据表、索引表结构探究"></a>2.数据表、索引表结构探究</h1><p>查看三个索引表的主键！<br><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:phoenix:localhost&gt; !primarykeys zdq.z_idx</span><br><span class="line">+------------+--------------+-------------+--------------+----------+----------+--------------+------------+------------+--------------+----------+----------------+</span><br><span class="line">|<span class="string"> TABLE_CAT  </span>|<span class="string"> TABLE_SCHEM  </span>|<span class="string"> TABLE_NAME  </span>|<span class="string"> COLUMN_NAME  </span>|<span class="string"> KEY_SEQ  </span>|<span class="string"> PK_NAME  </span>|<span class="string"> ASC_OR_DESC  </span>|<span class="string"> DATA_TYPE  </span>|<span class="string"> TYPE_NAME  </span>|<span class="string"> COLUMN_SIZE  </span>|<span class="string"> TYPE_ID  </span>|<span class="string"> VIEW_CONSTANT  </span>|</span><br><span class="line">+------------+--------------+-------------+--------------+----------+----------+--------------+------------+------------+--------------+----------+----------------+</span><br><span class="line">|<span class="string">            </span>|<span class="string"> ZDQ          </span>|<span class="string"> Z_IDX       </span>|<span class="string"> 0:Z          </span>|<span class="string"> 2        </span>|<span class="string">          </span>|<span class="string"> A            </span>|<span class="string"> 3          </span>|<span class="string"> DECIMAL    </span>|<span class="string"> null         </span>|<span class="string"> 3        </span>|<span class="string">                </span>|</span><br><span class="line">|<span class="string">            </span>|<span class="string"> ZDQ          </span>|<span class="string"> Z_IDX       </span>|<span class="string"> :ID          </span>|<span class="string"> 3        </span>|<span class="string">          </span>|<span class="string"> A            </span>|<span class="string"> -5         </span>|<span class="string"> BIGINT     </span>|<span class="string"> null         </span>|<span class="string"> -5       </span>|<span class="string">                </span>|</span><br><span class="line">|<span class="string">            </span>|<span class="string"> ZDQ          </span>|<span class="string"> Z_IDX       </span>|<span class="string"> _INDEX_ID    </span>|<span class="string"> 1        </span>|<span class="string">          </span>|<span class="string"> A            </span>|<span class="string"> 5          </span>|<span class="string"> SMALLINT   </span>|<span class="string"> null         </span>|<span class="string"> 5        </span>|<span class="string">                </span>|</span><br><span class="line">+------------+--------------+-------------+--------------+----------+----------+--------------+------------+------------+--------------+----------+----------------+</span><br><span class="line">0: jdbc:phoenix:localhost&gt; !primarykeys zdq.x_idx</span><br><span class="line">+------------+--------------+-------------+--------------+----------+----------+--------------+------------+------------+--------------+----------+----------------+</span><br><span class="line">|<span class="string"> TABLE_CAT  </span>|<span class="string"> TABLE_SCHEM  </span>|<span class="string"> TABLE_NAME  </span>|<span class="string"> COLUMN_NAME  </span>|<span class="string"> KEY_SEQ  </span>|<span class="string"> PK_NAME  </span>|<span class="string"> ASC_OR_DESC  </span>|<span class="string"> DATA_TYPE  </span>|<span class="string"> TYPE_NAME  </span>|<span class="string"> COLUMN_SIZE  </span>|<span class="string"> TYPE_ID  </span>|<span class="string"> VIEW_CONSTANT  </span>|</span><br><span class="line">+------------+--------------+-------------+--------------+----------+----------+--------------+------------+------------+--------------+----------+----------------+</span><br><span class="line">|<span class="string">            </span>|<span class="string"> ZDQ          </span>|<span class="string"> X_IDX       </span>|<span class="string"> 0:X          </span>|<span class="string"> 2        </span>|<span class="string">          </span>|<span class="string"> A            </span>|<span class="string"> 3          </span>|<span class="string"> DECIMAL    </span>|<span class="string"> null         </span>|<span class="string"> 3        </span>|<span class="string">                </span>|</span><br><span class="line">|<span class="string">            </span>|<span class="string"> ZDQ          </span>|<span class="string"> X_IDX       </span>|<span class="string"> :ID          </span>|<span class="string"> 3        </span>|<span class="string">          </span>|<span class="string"> A            </span>|<span class="string"> -5         </span>|<span class="string"> BIGINT     </span>|<span class="string"> null         </span>|<span class="string"> -5       </span>|<span class="string">                </span>|</span><br><span class="line">|<span class="string">            </span>|<span class="string"> ZDQ          </span>|<span class="string"> X_IDX       </span>|<span class="string"> _INDEX_ID    </span>|<span class="string"> 1        </span>|<span class="string">          </span>|<span class="string"> A            </span>|<span class="string"> 5          </span>|<span class="string"> SMALLINT   </span>|<span class="string"> null         </span>|<span class="string"> 5        </span>|<span class="string">                </span>|</span><br><span class="line">+------------+--------------+-------------+--------------+----------+----------+--------------+------------+------------+--------------+----------+----------------+</span><br><span class="line">0: jdbc:phoenix:localhost&gt; !primarykeys zdq.y_idx</span><br><span class="line">+------------+--------------+-------------+--------------+----------+----------+--------------+------------+------------+--------------+----------+----------------+</span><br><span class="line">|<span class="string"> TABLE_CAT  </span>|<span class="string"> TABLE_SCHEM  </span>|<span class="string"> TABLE_NAME  </span>|<span class="string"> COLUMN_NAME  </span>|<span class="string"> KEY_SEQ  </span>|<span class="string"> PK_NAME  </span>|<span class="string"> ASC_OR_DESC  </span>|<span class="string"> DATA_TYPE  </span>|<span class="string"> TYPE_NAME  </span>|<span class="string"> COLUMN_SIZE  </span>|<span class="string"> TYPE_ID  </span>|<span class="string"> VIEW_CONSTANT  </span>|</span><br><span class="line">+------------+--------------+-------------+--------------+----------+----------+--------------+------------+------------+--------------+----------+----------------+</span><br><span class="line">|<span class="string">            </span>|<span class="string"> ZDQ          </span>|<span class="string"> Y_IDX       </span>|<span class="string"> 0:Y          </span>|<span class="string"> 2        </span>|<span class="string">          </span>|<span class="string"> A            </span>|<span class="string"> 3          </span>|<span class="string"> DECIMAL    </span>|<span class="string"> null         </span>|<span class="string"> 3        </span>|<span class="string">                </span>|</span><br><span class="line">|<span class="string">            </span>|<span class="string"> ZDQ          </span>|<span class="string"> Y_IDX       </span>|<span class="string"> :ID          </span>|<span class="string"> 3        </span>|<span class="string">          </span>|<span class="string"> A            </span>|<span class="string"> -5         </span>|<span class="string"> BIGINT     </span>|<span class="string"> null         </span>|<span class="string"> -5       </span>|<span class="string">                </span>|</span><br><span class="line">|<span class="string">            </span>|<span class="string"> ZDQ          </span>|<span class="string"> Y_IDX       </span>|<span class="string"> _INDEX_ID    </span>|<span class="string"> 1        </span>|<span class="string">          </span>|<span class="string"> A            </span>|<span class="string"> 5          </span>|<span class="string"> SMALLINT   </span>|<span class="string"> null         </span>|<span class="string"> 5        </span>|<span class="string">                </span>|</span><br><span class="line">+------------+--------------+-------------+--------------+----------+----------+--------------+------------+------------+--------------+----------+----------------+</span><br></pre></td></tr></table></figure></p>
<p>发现三个索引表中除了<strong>被索引的字段</strong>字段不同外，其他组成并且在主键中的顺序都是一样的，下面看一下执行计划！</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">0: jdbc:phoenix:localhost&gt; explain select * <span class="keyword">from</span> zdq.test where x = 1;</span><br><span class="line">+---------------------------------------------------------------------------+</span><br><span class="line">|                                   PLAN                                    |</span><br><span class="line">+---------------------------------------------------------------------------+</span><br><span class="line">|<span class="built_in"> CLIENT </span>1-CHUNK PARALLEL 1-WAY ROUND ROBIN RANGE SCAN OVER ZDQ.TEST [1,1]  |</span><br><span class="line">|    <span class="built_in"> SERVER FILTER </span>BY FIRST KEY ONLY                                       |</span><br><span class="line">+---------------------------------------------------------------------------+</span><br><span class="line">2 rows selected (0.064 seconds)</span><br><span class="line">0: jdbc:phoenix:localhost&gt; explain select * <span class="keyword">from</span> zdq.test where y &gt; 3;</span><br><span class="line">+-----------------------------------------------------------------------------------+</span><br><span class="line">|                                       PLAN                                        |</span><br><span class="line">+-----------------------------------------------------------------------------------+</span><br><span class="line">|<span class="built_in"> CLIENT </span>1-CHUNK PARALLEL 1-WAY ROUND ROBIN RANGE SCAN OVER ZDQ.TEST [2,3] - [2,*]  |</span><br><span class="line">|    <span class="built_in"> SERVER FILTER </span>BY FIRST KEY ONLY                                               |</span><br><span class="line">+-----------------------------------------------------------------------------------+</span><br><span class="line">2 rows selected (0.067 seconds)</span><br><span class="line">0: jdbc:phoenix:localhost&gt; explain select * <span class="keyword">from</span> zdq.test where z &lt; 2;</span><br><span class="line">+-----------------------------------------------------------------------------------+</span><br><span class="line">|                                       PLAN                                        |</span><br><span class="line">+-----------------------------------------------------------------------------------+</span><br><span class="line">|<span class="built_in"> CLIENT </span>1-CHUNK PARALLEL 1-WAY ROUND ROBIN RANGE SCAN OVER ZDQ.TEST [3,*] - [3,2]  |</span><br><span class="line">|    <span class="built_in"> SERVER FILTER </span>BY FIRST KEY ONLY                                               |</span><br><span class="line">+-----------------------------------------------------------------------------------+</span><br></pre></td></tr></table></figure>
<p>从给出的执行计划中可以看出，三次查询都是进行的<strong>RANGE SCAN</strong>,但是注意到 <code>[1,1],[2,3] - [2,*],[3,*] - [3,2]</code>的不同，虽然对其中含义不完全确定，可以知道的是中括号的第二个数和查询约束相关，第一个数吗，是索引建立的顺序？这样也可以与索引表的 primary key 组成的<code>_INDEX_ID</code>的字面意义对应，猜测而已，接下来看一下在 HBase Shell 中的结果吧！</p>
<figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">hbase(main):004:0&gt; scan 'ZDQ.TEST'</span><br><span class="line">ROW                                                  COLUMN+CELL</span><br><span class="line"> <span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>C1<span class="symbol">\x</span>02<span class="symbol">\x</span>00<span class="symbol">\x</span>80<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>0009      column=L#0:_0, timestamp=1472824360985, value=_0</span><br><span class="line"> <span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>C1<span class="symbol">\x</span>05<span class="symbol">\x</span>00<span class="symbol">\x</span>80<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>01<span class="symbol">\x</span>E2@   column=L#0:_0, timestamp=1472824362230, value=_0</span><br><span class="line"> <span class="symbol">\x</span>00<span class="symbol">\x</span>01<span class="symbol">\x</span>C1<span class="symbol">\x</span>03<span class="symbol">\x</span>00<span class="symbol">\x</span>80<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>0009      column=L#0:_0, timestamp=1472824360985, value=_0</span><br><span class="line"> <span class="symbol">\x</span>00<span class="symbol">\x</span>01<span class="symbol">\x</span>C1<span class="symbol">\x</span>06<span class="symbol">\x</span>00<span class="symbol">\x</span>80<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>01<span class="symbol">\x</span>E2@   column=L#0:_0, timestamp=1472824362230, value=_0</span><br><span class="line"> <span class="symbol">\x</span>00<span class="symbol">\x</span>02<span class="symbol">\x</span>C1<span class="symbol">\x</span>04<span class="symbol">\x</span>00<span class="symbol">\x</span>80<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>0009      column=L#0:_0, timestamp=1472824360985, value=_0</span><br><span class="line"> <span class="symbol">\x</span>00<span class="symbol">\x</span>02<span class="symbol">\x</span>C1<span class="symbol">\x</span>07<span class="symbol">\x</span>00<span class="symbol">\x</span>80<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>01<span class="symbol">\x</span>E2@   column=L#0:_0, timestamp=1472824362230, value=_0</span><br><span class="line"> <span class="symbol">\x</span>80<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>0009                          column=0:M, timestamp=1472824360985, value=<span class="symbol">\x</span>C1<span class="symbol">\x</span>02</span><br><span class="line"> <span class="symbol">\x</span>80<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>0009                          column=0:N, timestamp=1472824360985, value=<span class="symbol">\x</span>80<span class="symbol">\x</span>00</span><br><span class="line"> <span class="symbol">\x</span>80<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>0009                          column=0:X, timestamp=1472824360985, value=<span class="symbol">\x</span>80<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>01</span><br><span class="line"> <span class="symbol">\x</span>80<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>0009                          column=0:Y, timestamp=1472824360985, value=<span class="symbol">\x</span>80<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>02</span><br><span class="line"> <span class="symbol">\x</span>80<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>0009                          column=0:Z, timestamp=1472824360985, value=<span class="symbol">\x</span>80<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>03</span><br><span class="line"> <span class="symbol">\x</span>80<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>0009                          column=0:_0, timestamp=1472824360985, value=x</span><br><span class="line"> <span class="symbol">\x</span>80<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>01<span class="symbol">\x</span>E2@                       column=0:M, timestamp=1472824362230, value=<span class="symbol">\x</span>C1<span class="symbol">\x</span>03</span><br><span class="line"> <span class="symbol">\x</span>80<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>01<span class="symbol">\x</span>E2@                       column=0:N, timestamp=1472824362230, value=<span class="symbol">\x</span>80<span class="symbol">\x</span>01</span><br><span class="line"> <span class="symbol">\x</span>80<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>01<span class="symbol">\x</span>E2@                       column=0:X, timestamp=1472824362230, value=<span class="symbol">\x</span>80<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>04</span><br><span class="line"> <span class="symbol">\x</span>80<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>01<span class="symbol">\x</span>E2@                       column=0:Y, timestamp=1472824362230, value=<span class="symbol">\x</span>80<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>05</span><br><span class="line"> <span class="symbol">\x</span>80<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>01<span class="symbol">\x</span>E2@                       column=0:Z, timestamp=1472824362230, value=<span class="symbol">\x</span>80<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>06</span><br><span class="line"> <span class="symbol">\x</span>80<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>00<span class="symbol">\x</span>01<span class="symbol">\x</span>E2@                       column=0:_0, timestamp=1472824362230, value=x</span><br><span class="line">8 row(s) in 0.0570 seconds</span><br></pre></td></tr></table></figure>
<p>注意到，我们只插入了两行，应该只有两个主键才对，HBase Shell 中我们看到了<strong>8个主键</strong>,含有<code>0:M,0:N,0:X,0:Y,0:Z</code>的两行无疑是我们执行 <code>UPSERT</code> 命令插入的，剩下的六行是什么鬼？</p>
<p>以<code>\x00\x00\xC1\x02\x00\x80\x00\x00\x00\x00\x0009</code> 和 <code>\x00\x00\xC1\x05\x00\x80\x00\x00\x00\x00\x01\xE2@</code> 为例，很快我们就可以发现这两行的后半截 <code>\x80\x00\x00\x00\x00\x0009</code> 就是原数据表的主键了，这与 <code>!primarykeys</code> 中看到的 <code>:ID</code>的 <code>KEY_SEQ = 3</code> 是一致的。</p>
<p>剩下前边的 <code>\x00\x00\xC1\x02\x00</code> 和 <code>\x00\x00\xC1\x05\x00</code> ,不过代表什么意思就得猜了，索引表主键查看的结果中，被索引字段(姑且还这么叫吧)是被放在了第二位的 <code>KEY_SEQ = 2</code> ，并且是 <code>Decimal</code>类型的，这就是为什么在创建表的时候多了一个 Decimal 类型的字段 <code>M</code>,在 HBase Shell 中的查询结果有这么一行<code>\x80\x00\x00\x00\x00\x00\x04\xD2                    column=0:M, timestamp=1472822139596, value=\xC1\x02</code>,看 M 的值对比<code>\x00\x00\xC1\x02\x00</code>，发现出后边多了一个 <code>\x00</code>之外，其余是吻合的，即 X = M，前缀 <code>\x00\x00</code> <code>\x00\x01</code> <code>\x00\x02</code> 应该就是三个索引的编号了，如果在创建第四个索引，就还会多出 N 行，N 为原始数据的行数，经过实践确实如此，只是中间的一个 <code>\x00</code> 是做什么用的还不清楚！</p>
<p>从这里大概可以猜出 <strong>shadow column families</strong>的意思了，应该就是指在同一个表中添加主键构成不同的行作为索引。</p>
<h1 id="3-总结"><a href="#3-总结" class="headerlink" title="3.总结"></a>3.总结</h1><p>经过以上实验，总结 Phoenix 的 Local Index ：</p>
<ul>
<li>从 Phoenix 4.8 版本开始，Local Index 和原始数据是存在于一个表中的！</li>
<li>Local Index 先范围扫描约束，根据得到的 <code>:ID</code> 再查询原始数据，所以 Local Index 是可以用在任意字段的查询中都有作用！</li>
<li>shadow column families 应该就是一个小 trick 而已，弄得概念很高大上，如果我理解错了还望指正。</li>
<li>Local Index 查询至少经过一次 RANGE SCAN 和 GET ，所以效率上肯定不如 Global Index 高。</li>
<li>疑问1：Local Index 是保证了索引表和原始表在同一个 RegionServer 上的，如果在一个表中，行健组成又不同，Phoenix 是如何实现这一点的？</li>
<li>官方文档说：如果一个 Local Index 被使用，所用的 Region 都要被检查是否有满足约束的数据，所以读取效率很低呐！</li>
</ul>
<p>最后，发现 Phoenix 把各种 Data Type 的都变成 Hexacdemical 字符串了，很不利于人来查看，虽然在 Phoenix 的交互命令行中是类如 RDMBS 的可读的，但在这次实验中也发现了这些 Hexacdemical 太不友好，如果有必要并且找到比较好的解决方案的话，大家给提供些帮助如何使 hexacdemical readable?</p>
</div><div class="tags"><a href="/tags/HBase/">HBase</a><a href="/tags/Secondary-Index/">Secondary Index</a><a href="/tags/Phoenix/">Phoenix</a><a href="/tags/Local-Index/">Local Index</a></div><div class="post-nav"><a href="/2016/10/07/phoenix-mapreduce-example/" class="pre">用 Phoenix 跑 MapReduce 任务-官方例子</a><a href="/2016/08/29/Phoenix-Secondary-Index-Exploration-Global-Index/" class="next">Phoenix Secondary Index初探之Global Index</a></div><div id="disqus_thread"><div class="btn_click_load"><button class="disqus_click_btn">阅读评论 「请确保 disqus.com 可以正常加载」</button></div><script>var disqus_shortname = 'dequn-blog';
var disqus_identifier = '2016/09/02/Phoenix-Secondary-Index-Exploration-Local-Index/';
var disqus_title = 'Phoenix Secondary Index初探之Local Index';
var disqus_url = 'http://dequn.github.io/2016/09/02/Phoenix-Secondary-Index-Exploration-Local-Index/';
$('.btn_click_load').click(function() {
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
  $('.btn_click_load').css('display','none');
});
$.ajax({
  url: 'https://disqus.com/next/config.json',
  timeout: 3000,
  type: 'GET',
  success: (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    $('.btn_click_load').css('display','none');
  })(),
  error: function() {
    $('.btn_click_load').css('display','block');
  }
});</script><script id="dsq-count-scr" src="//dequn-blog.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1 pure-u-md-1-4"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://dequn.github.io"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Angular/">Angular</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Django/">Django</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Docker/">Docker</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/HBase/">HBase</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hadoop/">Hadoop</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Others/">Others</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Phoenix/">Phoenix</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spark/">Spark</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Zeppelin/">Zeppelin</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/drf/">drf</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/twisted/">twisted</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/个人日记/">个人日记</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/Oracle/" style="font-size: 15px;">Oracle</a> <a href="/tags/mac/" style="font-size: 15px;">mac</a> <a href="/tags/HBase/" style="font-size: 15px;">HBase</a> <a href="/tags/Secondary-Index/" style="font-size: 15px;">Secondary Index</a> <a href="/tags/hindex/" style="font-size: 15px;">hindex</a> <a href="/tags/Angular/" style="font-size: 15px;">Angular</a> <a href="/tags/filter/" style="font-size: 15px;">filter</a> <a href="/tags/ShadowsocksX-NG/" style="font-size: 15px;">ShadowsocksX-NG</a> <a href="/tags/kcptun/" style="font-size: 15px;">kcptun</a> <a href="/tags/ui-router/" style="font-size: 15px;">ui-router</a> <a href="/tags/Controller/" style="font-size: 15px;">Controller</a> <a href="/tags/select-cascding/" style="font-size: 15px;">select-cascding</a> <a href="/tags/d3/" style="font-size: 15px;">d3</a> <a href="/tags/Django/" style="font-size: 15px;">Django</a> <a href="/tags/Celery/" style="font-size: 15px;">Celery</a> <a href="/tags/twisted/" style="font-size: 15px;">twisted</a> <a href="/tags/allauth/" style="font-size: 15px;">allauth</a> <a href="/tags/微信/" style="font-size: 15px;">微信</a> <a href="/tags/APScheduler/" style="font-size: 15px;">APScheduler</a> <a href="/tags/Channels/" style="font-size: 15px;">Channels</a> <a href="/tags/WebSocket/" style="font-size: 15px;">WebSocket</a> <a href="/tags/IOT/" style="font-size: 15px;">IOT</a> <a href="/tags/drf/" style="font-size: 15px;">drf</a> <a href="/tags/foreign-key/" style="font-size: 15px;">foreign key</a> <a href="/tags/Docker/" style="font-size: 15px;">Docker</a> <a href="/tags/Docker-Compose/" style="font-size: 15px;">Docker Compose</a> <a href="/tags/subdirectory/" style="font-size: 15px;">subdirectory</a> <a href="/tags/network/" style="font-size: 15px;">network</a> <a href="/tags/Endpoint/" style="font-size: 15px;">Endpoint</a> <a href="/tags/Zookeeper/" style="font-size: 15px;">Zookeeper</a> <a href="/tags/elasticsearch/" style="font-size: 15px;">elasticsearch</a> <a href="/tags/CentOS/" style="font-size: 15px;">CentOS</a> <a href="/tags/面试/" style="font-size: 15px;">面试</a> <a href="/tags/VIM/" style="font-size: 15px;">VIM</a> <a href="/tags/MacVim/" style="font-size: 15px;">MacVim</a> <a href="/tags/Python/" style="font-size: 15px;">Python</a> <a href="/tags/args/" style="font-size: 15px;">args</a> <a href="/tags/Hadoop/" style="font-size: 15px;">Hadoop</a> <a href="/tags/MapReduce/" style="font-size: 15px;">MapReduce</a> <a href="/tags/spark/" style="font-size: 15px;">spark</a> <a href="/tags/Phoenix/" style="font-size: 15px;">Phoenix</a> <a href="/tags/pyenv/" style="font-size: 15px;">pyenv</a> <a href="/tags/格式化/" style="font-size: 15px;">格式化</a> <a href="/tags/Interceptor/" style="font-size: 15px;">Interceptor</a> <a href="/tags/RowFilter/" style="font-size: 15px;">RowFilter</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/Encoding/" style="font-size: 15px;">Encoding</a> <a href="/tags/Python3/" style="font-size: 15px;">Python3</a> <a href="/tags/Twisted/" style="font-size: 15px;">Twisted</a> <a href="/tags/web/" style="font-size: 15px;">web</a> <a href="/tags/request/" style="font-size: 15px;">request</a> <a href="/tags/import/" style="font-size: 15px;">import</a> <a href="/tags/IDE/" style="font-size: 15px;">IDE</a> <a href="/tags/PyCharm/" style="font-size: 15px;">PyCharm</a> <a href="/tags/职业选择/" style="font-size: 15px;">职业选择</a> <a href="/tags/工作与初心/" style="font-size: 15px;">工作与初心</a> <a href="/tags/Local-Index/" style="font-size: 15px;">Local Index</a> <a href="/tags/charset/" style="font-size: 15px;">charset</a> <a href="/tags/encode/" style="font-size: 15px;">encode</a> <a href="/tags/Spark/" style="font-size: 15px;">Spark</a> <a href="/tags/Intellij-IDEA/" style="font-size: 15px;">Intellij IDEA</a> <a href="/tags/Zeppelin/" style="font-size: 15px;">Zeppelin</a> <a href="/tags/Global-Index/" style="font-size: 15px;">Global Index</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/12/23/drf-serializer-foreignkey-post-id-get-full-content/">DRF serializer中外键post使用id，get获取详细信息</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/03/yi-ci-ke-pa-de-wu-cao-zuo/">一次可怕的误操作-暨IDE的重要性</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/14/django-add-user-celery-task/">Django添加用户Celery任务</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/22/communication-between-twisted-services/">twisted 服务间通信</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/30/docker-network/">记一次Confluence迁移数据库和Docker network网络修改</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/23/docker-compose-subdirectory-dockerfile/">docker-compose 子目录编译、运行</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/21/ShadowsocksX-NG-kcptun-settings/">ShadowsocksX-NG kcptun加速配置释疑</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/19/django-channels-websocket-iot-remote-control/">基于Django & Channels & WebSocket & Twisted的物联网远程控制</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/12/django-allauth-weixin-login/">django-allauth配置微信登陆</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/02/django-celery/">Django2结合Celery添加定时任务</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> Recent Comments</i></div><script type="text/javascript" src="//dequn-blog.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">dequn's blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.1.20/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.1.20/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>